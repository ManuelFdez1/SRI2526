

<!DOCTYPE html>
<html class="writer-html5" lang="es" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>6.5. Rendimiento y optimización &mdash; ASIR - Servicios de Red e Internet</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/my_theme.css?v=572081c4" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=4936afed"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/translations.js?v=f85f4cfb"></script>
      <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Búsqueda" href="../search.html" />
    <link rel="next" title="6.6. Alta disponibilidad" href="disponibilidad.html" />
    <link rel="prev" title="6.4. Seguridad. HTTPS" href="https.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Servicios de Red e Internet
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Buscar documentos" aria-label="Buscar documentos" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contenidos</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../PRESENTACION/Index.html">1. Presentación Módulo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TEMA_1_Introduccion/Index.html">2. Introducción a los Servicios de Red</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TEMA_2_Dhcp/Index.html">3. Protocolo de Configuración Dinámico. DHCP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tema_3_DNS/Index.html">4. Resolución de nombres. DNS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tema_4_Router/Index.html">5. Interconexión de Redes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="Index.html">6. Servicio WEB. HTTP(S)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="componentes.html">6.1. Componentes del protocolo HTTP</a></li>
<li class="toctree-l2"><a class="reference internal" href="clientes.html">6.2. Clientes HTTP. navegadores</a></li>
<li class="toctree-l2"><a class="reference internal" href="http.html">6.3. Configuración HTTP</a></li>
<li class="toctree-l2"><a class="reference internal" href="https.html">6.4. Seguridad. HTTPS</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">6.5. Rendimiento y optimización</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#apache">6.5.1. Apache</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nginx">6.5.2. NginX</a></li>
<li class="toctree-l3"><a class="reference internal" href="#probando-el-rendimiento">6.5.3. Probando el rendimiento</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="disponibilidad.html">6.6. Alta disponibilidad</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Tema_6_Acceso/Index.html">7. Acceso</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tema_7_Email/Index.html">8. Correo Electrónico</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tema_8_Otros/Index.html">9. Otros Servicios</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Servicios de Red e Internet</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="Index.html"><span class="section-number">6. </span>Servicio WEB. HTTP(S)</a></li>
      <li class="breadcrumb-item active"><span class="section-number">6.5. </span>Rendimiento y optimización</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/Tema_5_Web/rendimiento.rst.txt" rel="nofollow"> Ver código fuente de la página</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="rendimiento-y-optimizacion">
<h1><span class="section-number">6.5. </span>Rendimiento y optimización<a class="headerlink" href="#rendimiento-y-optimizacion" title="Link to this heading"></a></h1>
<p>El rendimiento de un servidor web, el más utilizado, y a través del cual se prestan muchos otros servicios(por ejemplo el WedDAV), es un aspecto crítico.
Para mejorar su rendimiento existen multitud de parámetros y módulos que pueden configurarse en función de nuestras necesidades.
Cada servidor suele tener en su documentación oficial, una guía de como <strong>ajustar (tuning en inglés) el rendimiento (performance en inglés)</strong>.</p>
<a class="reference internal image-reference" href="../_images/rendimientoapachenginx.png"><img alt="Rendimiento Apache vs NGINX" class="align-center" src="../_images/rendimientoapachenginx.png" style="width: 400px;" />
</a>
<section id="apache">
<h2><span class="section-number">6.5.1. </span>Apache<a class="headerlink" href="#apache" title="Link to this heading"></a></h2>
<p>Tal y como indica la documentación oficial… <em>«Apache es un servidor web de uso general, diseñado para proporcionar flexibilidad, portabilidad y
rendimiento. Aunque no ha sido diseñado específicamente para establecer récords de referencia, es capaz de ofrecer un alto rendimiento en muchas
situaciones. La versión 2.x contiene muchas optimizaciones adicionales para aumentar el rendimiento y la escalabilidad»</em>.
La mayoria de estas opciones de optimización y mejora del rendimiento de nuestro servidor Apache tienen que ver con tres conceptos:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Opciones generales de optimización.</p></li>
<li><p>Configuración Caché</p></li>
<li><p>Módulos Apache.</p></li>
<li><p>Controladores(<strong>Handlers</strong>)</p></li>
</ol>
</div></blockquote>
<p><strong>OPCIONES GENERALES</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>Cuestiones relacionadas con configuraciones de Hardware, del sistema operativo sobre el que se ejecuta Apache o de la red. Puedes encontrar un manual bastante útil en la <a class="reference external" href="http://httpd.apache.org/docs/current/misc/perf-tuning.html">doc. oficial</a>.</p></li>
</ul>
</div></blockquote>
<p><strong>CONFIGURACIÓN CACHÉ</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>Podemos configurar nuestro Apache para que guarde en memoria algunos elementos de los que ofrece el servicio (<a class="reference external" href="https://httpd.apache.org/docs/2.4/caching.html">manual en la doc. oficial</a>).</p></li>
<li><p>También existe la opción de ayudarnos con otros programas que actuen como intermediarios entre las peticiones de los clientes y el propio servidor web (ejemplos de esto pueden ser <a class="reference external" href="https://memcached.org/">Memcached</a> o <a class="reference external" href="https://varnish-cache.org/">Varnish</a>).</p></li>
</ul>
</div></blockquote>
<p><strong>MÓDULOS DE APACHE</strong></p>
<blockquote>
<div><ul>
<li><p>La mayoría de opciones de optimización se configuran en <a class="reference external" href="http://httpd.apache.org/docs/2.4/mod/">módulos</a> independientes de Apache, los cuales deben activarse y configurarse adecuadamente (<strong>mods_available/mods_enable</strong>)</p>
<blockquote>
<div><div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>apachectl<span class="w"> </span>-V
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/mpmApache.png"><img alt="MPM Apache" class="align-center" src="../_images/mpmApache.png" style="width: 300px;" />
</a>
</div></blockquote>
</li>
<li><p>En concreto, los <strong>MPM-Módulos de multiprocesamiento</strong> (<a class="reference external" href="http://httpd.apache.org/docs/current/mpm.html">documentación oficial</a>) nos permiten configurar el modo en que apache gestiona las peticiones de cada cliente(navegador) conectado, desde el punto de vista en que son creados y manejados los procesos y subprocesos(hilos o threads en inglés) necesarios.</p>
<blockquote>
<div><div class="admonition important">
<p class="admonition-title">Importante</p>
<p>
Existen <b>3 modos de multiprocesamiento</b> en Apache <sup id="fnref:note1"><a class="footnote-ref" href="#fn:note1" role="doc-noteref">1</a></sup>. La elección de uno u otro nos va a condicionar por ejemplo el manejador (Handler) que atenderá las peticiones PHP.
<ul>
  <li>Prefork</li>
  <li>Worker</li>
  <li>Event</li>
</ul>
</p></div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p><strong>HANDLERS</strong></p>
<blockquote>
<div><p>Los Handlers o Controladores son los programas encargados de ejecutar determinados ficheros del servicio web. La elección de unos u otros puede mejorar el rendimiento del servidor.
El ejemplo más habitual en los actualmente es el del handler configurado en nuestro servidor para procesar las peticiones de paginas <strong>.php</strong>.
Las alternativas existentes, tal y como puedes <a class="reference external" href="https://blog.ahierro.es/php-mod_php-vs-cgi-vs-fastcgi-vs-fpm/#modphp,_CGI,_FastCGI_o_FPM,_cual_es_mejor">consultar en la web</a>, son:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p><strong>*mod_php</strong></p></li>
<li><p>CGI/_FastCGI</p></li>
<li><p><strong>FPM</strong></p></li>
</ol>
</div></blockquote>
</div></blockquote>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>¿Sabrías decir que tipo de configuración de MPM y handler de PHP necesitarías si fueras a alojar una web en tu servidor con una carga de actividad y número de peticiones elevadas y concurrentes?</p>
</div>
</section>
<section id="nginx">
<h2><span class="section-number">6.5.2. </span>NginX<a class="headerlink" href="#nginx" title="Link to this heading"></a></h2>
<p>
Inicialmente desarrollado para superar el rendimiento de Apache sirviendo contenidos estáticos (imágenes, css..), Nginx usa menos memoria que
Apache, y puede manejar aproximadamente cuatro veces más solicitudes. Por el contrario es menos flexible que Apache (no es tan módular como este).
La realidad es que la mayoría de las webs con mayor actividad suelen estar alojadas en servidores NginX. De hecho, tal y como indica
su web oficial <i>”NGINX es bien conocido como un balanceador de carga de alto rendimiento, caché y servidor web, que alimenta más del 40% de los
sitios web más activos del mundo”</i>.
Existen muchas opciones que podemos modificar para ajustar el rendimiento de nuestro servidor y que podemos encontrar en la web <sup id="fnref:note2"><a class="footnote-ref" href="#fn:note2" role="doc-noteref">2</a></sup>. Algunos
de los concetpos y parámetros más importantes que podemos modificar son:
<ul>
    <li>
        worker_processes
    </li>
    <li>
        worker_connections
    </li>
    <li>
        E / S de disco
    </li>
    <li>
        Compresión
    </li>
    <li>
        .............
    </li>
</ul>
</p></section>
<section id="probando-el-rendimiento">
<h2><span class="section-number">6.5.3. </span>Probando el rendimiento<a class="headerlink" href="#probando-el-rendimiento" title="Link to this heading"></a></h2>
<p>Existen multitud de herramientas para hacer test de referencia (<strong>benchmarking</strong> en inglés) sobre servidores web, simulando multitud de conexiones y devolviendo los datos de tiempo y carga registrados en el servidor (Apache, NginX..)
Algunos ejemplos este tipo de SW que podemos usar para obtener cálculos del rendimiento de nuestros servidrores web son:</p>
<blockquote>
<div><blockquote>
<div><ul>
<li><dl>
<dt><a class="reference external" href="https://httpd.apache.org/docs/2.4/programs/ab.html">AB (Apache Benchmarking)</a>, incluido en la instalación de Apache.</dt><dd><div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ab<span class="w"> </span>-n<span class="w"> </span><span class="m">1000</span><span class="w"> </span>-c<span class="w"> </span><span class="m">5</span><span class="w"> </span>-k<span class="w"> </span>http://example.com
</pre></div>
</div>
</dd>
</dl>
<a class="reference internal image-reference" href="../_images/resultadoComandoAB.png"><img alt="Resultado comando AB" class="align-center" src="../_images/resultadoComandoAB.png" style="width: 300px;" />
</a>
</li>
<li><p><a class="reference external" href="https://github.com/wg/wrk">WRK</a>, para realizar la instalación puedes seguir lo que indica el <a class="reference external" href="https://www.poppastring.com/blog/wrk-for-benchmarking-and-testing">siguiente manual</a>.</p></li>
<li><p><a class="reference external" href="https://jmeter.apache.org/">Apache JMeter</a> : Una de las opciones más populares en el mundo Open Source basado en Java.</p></li>
<li><p><a class="reference external" href="https://gatling.io/">Gatling</a></p></li>
</ul>
</div></blockquote>
<div class="admonition important">
<p class="admonition-title">Importante</p>
<p>Puede ser bastante útil utilizar algún código de ejemplo que podamos utilizar para realizar nuestras pruebas de rendimiento. Un ejemplo para probar PHP y MySql puedes encontrarlo
en el enlace <a class="reference external" href="https://github.com/vanilla-php/benchmark-php">https://github.com/vanilla-php/benchmark-php</a></p>
<a class="reference internal image-reference" href="../_images/ejemploBenchmarkPHPMysql.png"><img alt="Resultado comando AB" class="align-center" src="../_images/ejemploBenchmarkPHPMysql.png" style="width: 300px;" />
</a>
</div>
</div></blockquote>
<div style="text-align: justify; color: BLUE; background-color: #e0e0e0; border-radius: 25px; padding-top: 20px;padding-right: 30px;padding-bottom: 20px; padding-left: 30px;">
<u>¿Sabrías?</u></br>
Usando el código enlazado anteriormente prueba a realizar con AB algún análisis del rendimiento de ambos servidores. Puedes utilizar cualquier Instalación
previa de un servidor web que hayas hecho en este tema, capaz de ejecutar código PHP.
</div></br></br>
<div style="text-align: justify; color: orange; background-color: #e0e0e0; border-radius: 25px; padding-top: 20px;padding-right: 30px;padding-bottom: 20px; padding-left: 30px;">
<u><b>EJERCICIO 2</b></u></br>
Realiza el ejercicio 2 del Tema 5 del aula virtual. Realiza comprobaciones del rendimiento de tu servidor web y configúralo para mejorar los resultados.
</div>
</br></br>
<div class="footnotes">
    <hr />
    <ol>
        <li class="footnote" id="fn:note1">
            <p>
                <b>Digitalocean:</b> <a href="https://www.digitalocean.com/community/tutorials/how-to-configure-apache-http-with-mpm-event-and-php-fpm-on-ubuntu-18-04-es" target="_blank">Cómo configurar el servidor HTTP Apache con MPM </a>
                <a class="footnote-backref" rev="footnote" href="#fnref:note1">&#8617;</a>
            </p>
        </li>
        <li class="footnote" id="fn:note2">
            <p>
                <b> Geekflare:</b> <a href="https://www.cloudpanel.io/blog/nginx-performance/" target="_blank">Configuración de Nginx para rendimiento y seguridad</a>
               <a class="footnote-backref" rev="footnote" href="#fnref:note2">&#8617;</a>
            </p>
        </li>
    </ol>
</div></section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Pie de página">
        <a href="https.html" class="btn btn-neutral float-left" title="6.4. Seguridad. HTTPS" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Anterior</a>
        <a href="disponibilidad.html" class="btn btn-neutral float-right" title="6.6. Alta disponibilidad" accesskey="n" rel="next">Siguiente <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Derechos de autor 2023, M. Tomás Giménez Albert.</p>
  </div>

  Compilado con <a href="https://www.sphinx-doc.org/">Sphinx</a> usando un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">tema</a>
    proporcionado por <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>