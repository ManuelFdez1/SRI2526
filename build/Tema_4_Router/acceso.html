

<!DOCTYPE html>
<html class="writer-html5" lang="es" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>5.1. Acceso redes remotas &mdash; ASIR - Servicios de Red e Internet</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/my_theme.css?v=572081c4" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=4936afed"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/translations.js?v=f85f4cfb"></script>
      <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Búsqueda" href="../search.html" />
    <link rel="next" title="5.2. Apertura de puertos" href="puertos.html" />
    <link rel="prev" title="5. Interconexión de Redes" href="Index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Servicios de Red e Internet
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Buscar documentos" aria-label="Buscar documentos" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contenidos</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../PRESENTACION/Index.html">1. Presentación Módulo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TEMA_1_Introduccion/Index.html">2. Introducción a los Servicios de Red</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TEMA_2_Dhcp/Index.html">3. Protocolo de Configuración Dinámico. DHCP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tema_3_DNS/Index.html">4. Resolución de nombres. DNS</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="Index.html">5. Interconexión de Redes</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">5.1. Acceso redes remotas</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#windows">5.1.1. Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="#linux">5.1.2. Linux</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="puertos.html">5.2. Apertura de puertos</a></li>
<li class="toctree-l2"><a class="reference internal" href="seguridad.html">5.3. Seguridad. Proxy-Caché</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Tema_5_Web/Index.html">6. Servicio WEB. HTTP(S)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tema_6_Acceso/Index.html">7. Acceso</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tema_7_Email/Index.html">8. Correo Electrónico</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tema_8_Otros/Index.html">9. Otros Servicios</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Servicios de Red e Internet</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="Index.html"><span class="section-number">5. </span>Interconexión de Redes</a></li>
      <li class="breadcrumb-item active"><span class="section-number">5.1. </span>Acceso redes remotas</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/Tema_4_Router/acceso.rst.txt" rel="nofollow"> Ver código fuente de la página</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="acceso-redes-remotas">
<h1><span class="section-number">5.1. </span>Acceso redes remotas<a class="headerlink" href="#acceso-redes-remotas" title="Link to this heading"></a></h1>
<p>Vamos a configurar el enrutamiento HACIA EL EXTERIOR DE NUESTRA LAN, tanto en nuestra MV Windows Srv como en la distribución Linux que estemos utilizando, de manera que el tráfico que le llegue por la tarjeta interna con destino fuera de la red, lo reenvie por su tarjeta externa, realizando además las funciones de NAT.
Para activar el tráfico HACIA NUESTRA RED, si estamos configurando un PC como router debemos tener en cuenta si estamos ejecutando un cortafuegos. Si estamos configurando un router real debemos activar el reenvio (FORWARDING)  de puertos con las utilidades que incorpora el SW del dispositivo.</p>
<section id="windows">
<h2><span class="section-number">5.1.1. </span>Windows<a class="headerlink" href="#windows" title="Link to this heading"></a></h2>
<p><strong>GUI</strong></p>
<p>Es un servicio muy sencillo de instalar a través de la función (ROLE) <strong>ACCESO REMOTO(Remote Access)</strong> y sus servicios correspondientes <strong>ENRUTAMIENTO (Routing)</strong>, puedes añadir los otros servicios de rol para dar acceso por VPN o configurar un proxy web. Puedes encontrar un buen ejemplo en el <a class="reference external" href="https://blogs.itpro.es/readyplayerone/2015/10/03/servicios-de-enrutamiento-en-windows-server-2016/">siguiente tutorial</a> .</p>
<div style="text-align:center;">
<a href="https://i1.wp.com/blogs.itpro.es/readyplayerone/files/2015/10/07.png" target="_blank"><img width="800" alt="Lanwan" src="https://i1.wp.com/blogs.itpro.es/readyplayerone/files/2015/10/07.png"></a>
</div></br><p><strong>PowerShell</strong></p>
<p>Con dos sencillos comandos tendríamos navegando por Internet a nuestros clientes:</p>
<blockquote>
<div><div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="go">Install-WindowsFeature  -Name Routing</span>
<span class="go">Get-NetAdapter | Set-NetIPInterface -Forwarding Enabled</span>
<span class="go">New-NetNat -Name LOCAL -InternalIPInterfaceAddressPrefix 192.168.100.0/24</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p><strong>192.168.100.0/24</strong> es el id de la red local</p>
</div>
</div></blockquote>
</section>
<section id="linux">
<h2><span class="section-number">5.1.2. </span>Linux<a class="headerlink" href="#linux" title="Link to this heading"></a></h2>
<p>En las distribuciones Linux no necesitamos instalar ningún servicio para conseguir el enrutamiento y la NAT, ya que con las utilidades que incorpora el núcleo del SO podremos conseguir lo que pretendemos.
Tenemos varias opciones para crear rutas:</p>
<ul class="simple">
<li><p>Con el uso del comando <strong>ip route</strong> (<a class="reference external" href="https://www.cyberciti.biz/faq/linux-route-add/">https://www.cyberciti.biz/faq/linux-route-add/</a>)</p></li>
<li><p>Inclyendo <strong>rutas estáticas en nuestro fichero de netplan</strong> de configuración de red (<a class="reference external" href="https://linuxconfig.org/how-to-add-static-route-with-netplan-on-ubuntu-20-04-focal-fossa-linux">https://linuxconfig.org/how-to-add-static-route-with-netplan-on-ubuntu-20-04-focal-fossa-linux</a>)</p></li>
<li><dl class="simple">
<dt>A través de <strong>NETFILTER</strong>  (<a class="reference external" href="https://es.wikipedia.org/wiki/Netfilter">https://es.wikipedia.org/wiki/Netfilter</a>) que es el  framework disponible en el núcleo de Linux que permite interceptar y manipular paquetes de red. Dicho framework permite interactuar con paquetes en diferentes etapas del procesamiento dentro del sistema operativo, ofreciendo funcionalidades de cortafuegos y otras utilidades relacionadas. Los componentes más populares son:</dt><dd><ul>
<li><p>Las clásicas <strong>IPTABLES</strong> (<a class="reference external" href="http://es.tldp.org/Manuales-LuCAS/doc-iptables-firewall/doc-iptables-firewall.pdf">http://es.tldp.org/Manuales-LuCAS/doc-iptables-firewall/doc-iptables-firewall.pdf</a>).</p></li>
<li><p>Sustituidas por las más modernas (y probablemente sencillas) <strong>NFTABLES</strong> (<a class="reference external" href="https://www.josedomingo.org/pledin/2020/01/nftables-cortafuegos-perimetral-nat/">https://www.josedomingo.org/pledin/2020/01/nftables-cortafuegos-perimetral-nat/</a>).</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>Debemos incluir los comandos necesarios para:</p>
<ul class="simple">
<li><p>Enrutar los paquetes que vengan de nuestra red local a nuestra tarjeta interna. Activando el ip_forward entre tarjetas.</p></li>
<li><p>De estos paquetes identificar cuales tienen como destino otra red.</p></li>
<li><p>Reenviarlos por la tarjeta externa del servidor.</p></li>
<li><p>Realizar la NAT para que se puedan comunicar con la red destino.</p></li>
</ul>
<div class="admonition important">
<p class="admonition-title">Importante</p>
<p>Para que funcione bien el enrutamiento, recuerda repasar tus servidors DHCP y DNS, comprobando que todo esté correctamente configurado.</p>
</div>
</br>
<div style="text-align: justify; color: orange; background-color: #e0e0e0; border-radius: 25px; padding-top: 20px;padding-right: 30px;padding-bottom: 20px; padding-left: 30px;">
<u><b>PRÁCTICA 1</b></u></br>
Realiza la práctica 1 del Tema 4 del aula virtual, convirtiendo tus servidores en enrutadores.
</div>
</br></section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Pie de página">
        <a href="Index.html" class="btn btn-neutral float-left" title="5. Interconexión de Redes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Anterior</a>
        <a href="puertos.html" class="btn btn-neutral float-right" title="5.2. Apertura de puertos" accesskey="n" rel="next">Siguiente <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Derechos de autor 2023, M. Tomás Giménez Albert.</p>
  </div>

  Compilado con <a href="https://www.sphinx-doc.org/">Sphinx</a> usando un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">tema</a>
    proporcionado por <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>